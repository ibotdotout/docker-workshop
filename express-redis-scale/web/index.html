<html>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<script>
  var app=angular.module('refresh_div',[])
  .controller('refresh_control',  function($scope, $http, $timeout, $location) {
	var count = 0
	var prev = 0
    $scope.getData = function(){
		$http.get('http://' + $location.host() + ':' + $location.port() + '/count')
        .success(function(data, status, headers, config) {
          // Your code here
		  count = parseInt(data)	
		  diff = count - prev	
		  $scope.message='total: ' + count + ', inc rate: ' + diff
		  prev = count
        });
    };

    $scope.intervalFunction = function(){
      $timeout(function() {
        $scope.getData();
        $scope.intervalFunction();
      }, 500)
    };

     $scope.intervalFunction();

    $scope.clear = function(){
		$http.get('http://' + $location.host() + ':' + $location.port() + '/clear')
        .success(function(data, status, headers, config) {
			console.log('clear')	
		})
	}
  });
</script>
<body>

 <div ng-app="refresh_div" ng-controller="refresh_control">
	 {{message}} <br>
      <input type="button" ng-click="clear()" value="clear">
</div>
